// Generated by CoffeeScript 1.4.0

$(function() {
  var Scene, scene;
  Scene = function() {
    var $scene, $viewport, faceGroups, light, stats,
      _this = this;
    $viewport = $('.platonic-viewport');
    $scene = $viewport.find('section.scene');
    light = new Photon.Light();
    faceGroups = [];
    $('div.mesh-group:not([data-light="0"]), div.mesh:not(div.mesh-group > div.mesh):not([data-light="0"])').each(function(index, element) {
      var faceGroup;
      faceGroup = new Photon.FaceGroup($(element)[0], $(element).find('.face'), 0.8, 0.1, true);
      return faceGroups.push(faceGroup);
    });
    stats = new Stats();
    setInterval(function() {
      var faceGroup, _i, _len;
      stats.begin();
      for (_i = 0, _len = faceGroups.length; _i < _len; _i++) {
        faceGroup = faceGroups[_i];
        faceGroup.render(light, true);
      }
      return stats.end();
    });
    stats.domElement.style.position = 'absolute';
    stats.domElement.style.top = 0;
    stats.domElement.style.left = 0;
    $viewport.append(stats.domElement);
    return $(window).resize(function() {
      var height;
      height = $(window).height();
      $viewport.css({
        height: height + 'px'
      });
      return $scene.css({
        height: height + 'px'
      });
    }).trigger('resize');
  };
  return scene = new Scene();
});
